<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible"content="IE=edge">
        
        <meta name="viewPort" content="width=device-width, initial-scale=1.0">
        <title> R & K  Collection | By M.Kabir Ahmad</title>
        <link rel="stylesheet" href="../static/css/style.css">
        <link rel="script" href="../js/script.js">

        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">


<!-- Slider -->
<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
 <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.3/dist/umd/popper.min.js"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
<!-- Card -->




    </head>
 

    <body onload="populateTable()">
      <header class="header">
        <nav class="navbar navbar-expand-md navbar-dark bg-dark">
            <div class="container">
            <a class="navbar-brand d-md-none d-xs-block py-3" href="#">
                <img src="../static/images/Logo (2).png" height="120" alt="">
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavDropdown" aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
        
            <div class="collapse navbar-collapse" id="navbarNavDropdown">
                <img class="" src="../static/images/Logo (2).png" height="40" alt="R & K Garments">
                <a class="check nav-item nav-link mx-2 active" aria-current="page" href="#">R & K Collection</a>
                <ul class="navbar-nav mx-auto">
                  <li class="nav-item">
                    <a class="nav-link mx-2 active" aria-current="page" href="file:///E:/Study/Web%20Course%20Ustadam/Kabir%20Ahmad/index.html">Home</a>
                </li>
                    <a class="nav-link mx-2" href="#Category">Category</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link mx-2" href="#Category2"">Collection</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link mx-2" href="#footer">About</a>
                </li>
                <li class="nav-item">
                    <div class="dropdown show">
                        <a class="btn btn-secondary " href="Products.html" role="button" id="dropdownMenuLink" data-toggle="" aria-haspopup="true" aria-expanded="false">
                          CRUD
                        </a>
                      

                      </div>
                </li>
                <li class="nav-item" style="margin-left: 3.5rem;">
                    <a class="nav-link mx-2 btn rounded-0 btn-danger" href="login.html">Login</a>
                </li>
                </ul>
            </div>
            </div>
        </nav>
    </header>
        <div class="logo text-center d-none d-md-block">
            <img src="../static/images/Logo (2).png" height="150" width="150" alt="R & K Collection">
           
        </div>

        <!--
            Slider
        -->
     
        <div id="myCarousel" class="carousel slide" data-ride="carousel">
            <div class="carousel-inner">
              <div class="carousel-item active">
                <img class="d-block w-100" src="../static/images/C-1.png" alt="">
              </div>
              <div class="carousel-item">
                <img class="d-block w-100" src="../static/images/C2.png" alt="">
              </div>
              <div class="carousel-item">
                <img class="d-block w-100" src="../static/images/C3.png" alt="">
              </div>
              <div class="carousel-item">
                <img class="d-block w-100" src="../static/images/C4.png" alt="">
              </div>
            </div>
          
            <!-- Add navigation controls if needed -->
            <a class="carousel-control-prev" href="#myCarousel" role="button" data-slide="prev">
              <span class="carousel-control-prev-icon" aria-hidden="true"></span>
              <span class="sr-only">Previous</span>
            </a>
            <a class="carousel-control-next" href="#myCarousel" role="button" data-slide="next">
              <span class="carousel-control-next-icon" aria-hidden="true"></span>
              <span class="sr-only">Next</span>
            </a>
        </div>
        <!--
            Category
        -->
      <main>
        <!-- Modal -->
  
        <div id="editModal" class="modal" tabindex="-1">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title">Edit Product</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <form method="post" class="my-form">
                            <label for="pId">Product Id:</label>
                            <input type="text" id="pId" name="pId">
  
                            <label for="pName">Product Name:</label>
                            <input type="text" id="pName" name="pName">
  
                            <label for="pDescription">Product Description:</label>
                            <textarea id="pDescription" name="pDescription" rows="4" cols="37"></textarea>
  
                            <label for="pPrice">Product Price:</label>
                            <input type="text" id="pPrice" name="pPrice">
  
                            <label for="pRating">Product Rating:</label>
                            <input type="text" id="pRating" name="pRating">
  
                        </form>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                        <button type="button" class="btn btn-primary" data-bs-dismiss="modal"
                            onclick="updateProduct()">Update changes</button>
                    </div>
                </div>
            </div>
        </div>
  
  
        <!-- Modal -->

        <div id="addModal" class="modal" tabindex="-1">
            <div class="modal-dialog">
                <div class="modal-content">
                  
                    <div class="modal-header flex justify-content-center">
                        <h5 class="modal-title" ">Add Product</h5>
                        <button  type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>   

                    
                    <div class="modal-body">
                      <form method="post" class="my-form" id="productForm">
                        <label for="pIdAdd">Product Id:</label>
                        <input type="text" id="pIdAdd" name="pIdAdd" placeholder="Enter Id text here...">
                  
                        <label for="pNameAdd">Product Name:</label>
                        <input type="text" id="pNameAdd" name="pNameAdd" placeholder="Enter Name text here...">
                  
                        <label for="pDescriptionAdd">Product Description:</label>
                        <textarea id="pDescriptionAdd" name="pDescriptionAdd" placeholder="Enter Description text here..." rows="4" cols="37"></textarea>
                  
                        <label for="pPriceAdd">Product Price:</label>
                        <input type="text" id="pPriceAdd" name="pPriceAdd" placeholder="Enter Price text here...">
                  
                        <label for="pRatingAdd">Product Rating:</label>
                        <input type="text" id="pRatingAdd" name="pRatingAdd" placeholder="Enter Rating text here...">
                        
                        <label for="pImageAdd">Product Image:</label>
                        <input type="file" id="pImageAdd" name="pImageAdd">
                  
                    </form>
                      
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal"
                            onclick="hideProductModal()">Close</button>
                        <button type="button" class="btn btn-primary" data-bs-dismiss="modal"
                            onclick="saveProduct()">Save changes</button>
                    </div>
                </div>
            </div>
        </div>
      
      
        <div id="addBtnDiv" style="justify-content: center; text-align: center; padding: 30px;">
          <style>
            @import url("https://fonts.googleapis.com/css?family=Raleway");

:root {
  --glow-color: hsl(234, 68%, 56%);
}

*,
*::before,
*::after {
  box-sizing: border-box;
}

.glowing-btn {
  position: relative;
  color: var(--glow-color);
  cursor: pointer;
  padding: 0.35em 1em;
  border: 0.15em solid var(--glow-color);
  border-radius: 0.45em;
  background: none;
  perspective: 2em;
  font-family: "Raleway", sans-serif;
  font-size: 2em;
  font-weight: 900;
  letter-spacing: 1em;

  -webkit-box-shadow: inset 0px 0px 0.5em 0px var(--glow-color),
    0px 0px 0.5em 0px var(--glow-color);
  -moz-box-shadow: inset 0px 0px 0.5em 0px var(--glow-color),
    0px 0px 0.5em 0px var(--glow-color);
  box-shadow: inset 0px 0px 0.5em 0px var(--glow-color),
    0px 0px 0.5em 0px var(--glow-color);
  animation: border-flicker 2s linear infinite;
}

.glowing-txt {
  float: left;
  margin-right: -0.8em;
  -webkit-text-shadow: 0 0 0.125em hsl(0 0% 100% / 0.3),
    0 0 0.45em var(--glow-color);
  -moz-text-shadow: 0 0 0.125em hsl(0 0% 100% / 0.3),
    0 0 0.45em var(--glow-color);
  text-shadow: 0 0 0.125em hsl(0 0% 100% / 0.3), 0 0 0.45em var(--glow-color);
  animation: text-flicker 3s linear infinite;
}

.faulty-letter {
  opacity: 0.5;
  animation: faulty-flicker 2s linear infinite;
}

.glowing-btn::before {
  content: "";
  position: absolute;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
  opacity: 0.7;
  filter: blur(1em);
  transform: translateY(120%) rotateX(95deg) scale(1, 0.35);
  background: var(--glow-color);
  pointer-events: none;
}

.glowing-btn::after {
  content: "";
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  opacity: 0;
  z-index: -1;
  background-color: var(--glow-color);
  box-shadow: 0 0 2em 0.2em var(--glow-color);
  transition: opacity 100ms linear;
}

.glowing-btn:hover {
  color: rgba(0, 0, 0, 0.8);
  text-shadow: none;
  animation: none;
}

.glowing-btn:hover .glowing-txt {
  animation: none;
}

.glowing-btn:hover .faulty-letter {
  animation: none;
  text-shadow: none;
  opacity: 1;
}

.glowing-btn:hover:before {
  filter: blur(1.5em);
  opacity: 1;
}

.glowing-btn:hover:after {
  opacity: 1;
}

@keyframes faulty-flicker {
  0% {
    opacity: 0.1;
  }
  2% {
    opacity: 0.1;
  }
  4% {
    opacity: 0.5;
  }
  19% {
    opacity: 0.5;
  }
  21% {
    opacity: 0.1;
  }
  23% {
    opacity: 1;
  }
  80% {
    opacity: 0.5;
  }
  83% {
    opacity: 0.4;
  }

  87% {
    opacity: 1;
  }
}

@keyframes text-flicker {
  0% {
    opacity: 0.1;
  }

  2% {
    opacity: 1;
  }

  8% {
    opacity: 0.1;
  }

  9% {
    opacity: 1;
  }

  12% {
    opacity: 0.1;
  }
  20% {
    opacity: 1;
  }
  25% {
    opacity: 0.3;
  }
  30% {
    opacity: 1;
  }

  70% {
    opacity: 0.7;
  }
  72% {
    opacity: 0.2;
  }

  77% {
    opacity: 0.9;
  }
  100% {
    opacity: 0.9;
  }
}

@keyframes border-flicker {
  0% {
    opacity: 0.1;
  }
  2% {
    opacity: 1;
  }
  4% {
    opacity: 0.1;
  }

  8% {
    opacity: 1;
  }
  70% {
    opacity: 0.7;
  }
  100% {
    opacity: 1;
  }
}

@media only screen and (max-width: 600px) {
  .glowing-btn{
    font-size: 1em;
  }
}

          </style>
            <!-- <button class="btn btn-success" id="addProductBtn" data-bs-toggle="modal" data-bs-target="#addModal">Add
                Product</button> -->
                <button class='glowing-btn' id="addProductBtn" data-bs-toggle="modal" data-bs-target="#addModal"><span class='glowing-txt'>ADD<span class='faulty-letter'>P</span>RODCUT</span></button>
        </div>
        <div  text-align: center; padding: 30px;">
          <h1 style="
          font-family: 'Dancing Script', cursive;
          
          margin-bottom: 30px;">Products</h1>
      </div>
        <div id="productsTable " class="container">
            <table border="2" class="table table-striped">
                <thead>
                    <tr>
                        <th>Name</th>
                        <th>Description</th>
                        <th>Price</th>
                        <th>Rating</th>
                        <th>Edit</th>
                        <th>Delete</th>
                    </tr>
                </thead>
                <tbody id="productTableBody" class="table-hover">
  
                </tbody>
            </table>
        </div>
       
  
    </main>
         

        
  



      

<div>
    <footer id="footer"
    class="text-center text-lg-start text-white"
    style="background-color: #45526e"
    
    >
<!-- Grid container -->
<div class="container p-4 pb-0">
<!-- Section: Links -->

  <!--Grid row-->
  <div class="row">
    <!-- Grid column -->
    <div class="col-md-3 col-lg-3 col-xl-3 mx-auto mt-3">
        <a class="" href="#">
            <img src="../static/images/Logo (2).png" height="120" alt="">
        </a>
      <h6 class="text-uppercase mb-4 font-weight-bold">
        R & K Collections
      </h6>
      <p style="align-items: start;">
        R & K Collections presents a curated selection of top-tier fashion items on a premier sales platform. Elevate your style with our exclusive collection, where sophistication meets trendsetting. Discover unparalleled elegance and shop the latest in fashion at R & K Collections.
      </p>
    </div>
    <!-- Grid column -->

    <hr class="w-100 clearfix d-md-none" />

    <!-- Grid column -->
    <div class="col-md-2 col-lg-2 col-xl-2 mx-auto mt-3">
      <h6 class="text-uppercase mb-4 font-weight-bold">Products</h6>
      <p>
        <a class="text-white">Footwear</a>
      </p>
      <p>
        <a class="text-white">Garments</a>
      </p>
      <p>
        <a class="text-white">Jewelry</a>
      </p>
      <p>
        <a class="text-white">Shoes</a>
      </p>
      <p>
        <a class="text-white">Suits</a>
      </p>
      <p>
        <a class="text-white">Rings</a>
      </p>
      <p>
        <a class="text-white">Necklace</a>
      </p>
      <p>
        <a class="text-white">T-Shirts</a>
      </p>
      <p>
        <a class="text-white">Joggers</a>
      </p>

    </div>
    <!-- Grid column -->

    <hr class="w-100 clearfix d-md-none" />

    <!-- Grid column -->
    <div class="col-md-3 col-lg-2 col-xl-2 mx-auto mt-3">
      <h6 class="text-uppercase mb-4 font-weight-bold">
        Hot Items
      </h6>
      <p>
        <a class="text-white">Premium Shoes</a>
      </p>
      <p>
        <a class="text-white">Premium Suits</a>
      </p>
      <p>
        <a class="text-white">Premium Rings </a>
      </p>
      <p>
        <a class="text-white">Premium Froks</a>
      </p>
      <p>
        <a class="text-white">Premium Cloths</a>
      </p>
      <p>
        <a class="text-white">Premium Necklace</a>
      </p>
      <p>
        <a class="text-white">Premium Shirts</a>
      </p>
      <p>
        <a class="text-white">Premium Ear Rings</a>
      </p>

    </div>

    <!-- Grid column -->
    <hr class="w-100 clearfix d-md-none" />

    <!-- Grid column -->
    <div class="col-md-4 col-lg-3 col-xl-3 mx-auto mt-3">
      <h6 class="text-uppercase mb-4 font-weight-bold">Contact US</h6>
      <p><i class="fas fa-home mr-3"></i> Pakistan</p>
      <p><i class="fas fa-envelope mr-3"></i> mkabirahmad01@gmail.com</p>
      <p><i class="fas fa-phone mr-3"></i> + 01 234 567 88</p>
      <p><i class="fas fa-print mr-3"></i> + 01 234 567 89</p>
    </div>
    <!-- Grid column -->
  </div>
  <!--Grid row-->

  <div class="row d-flex align-items-center">
    <!-- Grid column -->
    <div class="col-md-7 col-lg-8 text-center text-md-start">
      <!-- Copyright -->
      <div class="p-3">
        © 2020 Copyright:
        <a class="text-white" href="https://mdbootstrap.com/"
           >by Muhammad Kabir Ahmad</a
          >
      </div>
      <!-- Copyright -->
    </div>
    <!-- Grid column -->

    <!-- Grid column -->
    <div class="col-md-5 col-lg-4 ml-lg-0 text-center text-md-end">
      <!-- Facebook -->
      <a
         class="btn btn-outline-light btn-floating m-1"
         class="text-white"
         role="button"
        <link type="image/png" sizes="16x16" rel="icon" href=".../icons8-facebook-16.png">
        </a>

      <!-- Twitter -->
      <a
         class="btn btn-outline-light btn-floating m-1"
         class="text-white"
         role="button"
         ><i class="fab fa-twitter"></i
        ></a>

      <!-- Google -->
      <a
         class="btn btn-outline-light btn-floating m-1"
         class="text-white"
         role="button"
         ><i class="fab fa-google"></i
        ></a>

      <!-- Instagram -->
      <a
         class="btn btn-outline-light btn-floating m-1"
         class="text-white"
         role="button"
         ><i class="fab fa-instagram"></i
        ></a>
    </div>
    <!-- Grid column -->
  </div>

<!-- Section: Copyright -->
</div>
<!-- Grid container -->
</footer>
</div>

<script src="../static/js/bootstrap.min.js"></script>
<script src = "../static/js/bootstrap.bundle.min.js"></script>
<script src="../static/bootstrap/js/bootstrap.min.js"></script>

<script>

  var backend_url = `http://localhost:5001`
  // Function to fetch all products and populate the table
  var products;
  async function populateTable() {
      var response = await fetch(`${backend_url}/products`);
      var data = await response.json();
      products = data;
      var tableBody = document.getElementById('productTableBody');
      tableBody.innerHTML = "";
      for (var index = 0; index < data.length; index++) {
          var product = data[index];
          var row = document.createElement('tr');
          row.innerHTML = `
    <td>${product.name}</td>
    <td>${product.description}</td>
    <td>${product.price}</td>
    <td>${product.rating}</td>
    <td><button class="btn btn-primary"  onclick="editProduct(${index})" data-bs-toggle="modal" data-bs-target="#editModal">Edit</button></td>
    <td><button class="btn btn-danger" onclick="deleteProduct(${index})">Delete</button></td>
  `;
          tableBody.appendChild(row);
      }
  }

  function editProduct(index) {
      document.getElementById('pId').value = products[index].pid;
      document.getElementById('pName').value = products[index].name;
      document.getElementById('pDescription').value = products[index].description;
      document.getElementById('pPrice').value = products[index].price;
      document.getElementById('pRating').value = products[index].rating;
  }

  async function updateProduct() {
      var pid = document.getElementById('pId').value;
      var pName = document.getElementById('pName').value;
      var pDescription = document.getElementById('pDescription').value;
      var pPrice = document.getElementById('pPrice').value;
      var pRating = document.getElementById('pRating').value;

      var product = {
          pid: pid,
          name: pName,
          description: pDescription,
          price: pPrice,
          rating: pRating,
      };
      response = await fetch(`${backend_url}/products`, {
          method: 'PATCH',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(product)
      });
      populateTable();
  }

  // Function to handle deleting a product
  async function deleteProduct(index) {
      const response = await fetch(`${backend_url}/products`, {
          method: 'DELETE',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ pid: products[index].pid })
      });
      populateTable();
  }

  async function saveProduct() {
      const pid = document.getElementById('pIdAdd').value;
      const pName = document.getElementById('pNameAdd').value;
      const pDescription = document.getElementById('pDescriptionAdd').value;
      const pPrice = document.getElementById('pPriceAdd').value;
      const pRating = document.getElementById('pRatingAdd').value;
      const image = document.getElementById('pImageAdd').value;

      var product = {
          pid: pid,
          name: pName,
          description: pDescription,
          price: pPrice,
          rating: pRating,
          image: image
      };
      var response = await fetch(`${backend_url}/products`, {
          method: 'POST',
          headers: {
              'Content-Type': 'application/json'
          },
          body: JSON.stringify(product)
      });
      console.log(response.ok)
      //reset form..
      const form = document.getElementById('productForm');
      form.reset();
      populateTable();
  }


</script>

</body>

</html>